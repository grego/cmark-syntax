<pre><code class="language-rust"><span class="keyword">use</span> <span class="identifier">std</span><span class="glyph">::</span><span class="special-identifier">io</span><span class="glyph">::</span>{<span class="identifier">stdout</span>, <span class="strong-identifier">Result</span>, <span class="strong-identifier">Write</span>};
<span class="keyword">fn</span> <span class="special-identifier">main</span>() <span class="glyph">-&gt;</span> <span class="strong-identifier">Result</span><span class="glyph">&lt;</span>()<span class="glyph">&gt;</span> {
    <span class="keyword">let</span> (<span class="identifier">s</span>, <span class="identifier">e</span>) <span class="glyph">=</span> (<span class="literal">br#&quot;use std::io::{stdout, Result, Write};
fn main() -&gt; Result&lt;()&gt; {
    let (s, e) = (br#&quot;&quot;#</span>, <span class="literal">br#&quot;#);
    let start = s.iter().chain(s).chain(&amp;[b'&quot;',b'#']).chain(b&quot;, br#\&quot;&quot;);
    let end = e.iter().chain(b&quot;\&quot;&quot;).chain(e).chain(b&quot;\n&quot;);
    stdout().write_all(&amp;start.chain(end).copied().collect::&lt;Vec&lt;_&gt;&gt;())
}&quot;#</span>);
    <span class="keyword">let</span> <span class="identifier">start</span> <span class="glyph">=</span> <span class="identifier">s</span><span class="glyph">.</span><span class="special-identifier">iter</span>()<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="identifier">s</span>)<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="glyph">&amp;</span>[<span class="literal">b'&quot;'</span>,<span class="literal">b'#'</span>])<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="literal">b&quot;, br#\&quot;&quot;</span>);
    <span class="keyword">let</span> <span class="identifier">end</span> <span class="glyph">=</span> <span class="identifier">e</span><span class="glyph">.</span><span class="special-identifier">iter</span>()<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="literal">b&quot;\&quot;&quot;</span>)<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="identifier">e</span>)<span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="literal">b&quot;\n&quot;</span>);
    <span class="identifier">stdout</span>()<span class="glyph">.</span><span class="special-identifier">write_all</span>(<span class="glyph">&amp;</span><span class="identifier">start</span><span class="glyph">.</span><span class="special-identifier">chain</span>(<span class="identifier">end</span>)<span class="glyph">.</span><span class="special-identifier">copied</span>()<span class="glyph">.</span><span class="special-identifier">collect</span><span class="glyph">::&lt;</span><span class="strong-identifier">Vec</span><span class="glyph">&lt;</span><span class="identifier">_</span><span class="glyph">&gt;&gt;</span>())
}
</code></pre>